<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <meta name="author" content="Dr.&nbsp;Kam Tin Seong  Assoc. Professor of Information Systems(Practice)">
  <meta name="dcterms.date" content="2025-08-15">
  <title>ISSS626 ‚Äì Lesson 10:  Spatial Interaction Models</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-f563837468303362081e247dddd440d0.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Lesson 10: <br>Spatial Interaction Models</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Dr.&nbsp;Kam Tin Seong <br>Assoc. Professor of Information Systems(Practice) 
</div>
        <p class="quarto-title-affiliation">
            School of Computing and Information Systems,<br>Singapore Management University
          </p>
    </div>
</div>

  <p class="date">15 Aug 2025</p>
</section>
<section id="content" class="slide level2">
<h2>Content</h2>
<ul>
<li>Characteristics of Spatial Interaction Data</li>
<li>Spatial Interaction Models
<ul>
<li>Unconstrained</li>
<li>Origin constrined</li>
<li>Destination constrained</li>
<li>Doubly constrained</li>
</ul></li>
<li>What is Spatial Econometrics?</li>
<li>What is Spatial Econometric Interaction Models?</li>
<li>Introducing spflow package</li>
<li>Spatial Econometric Modelling of O-D Flows: spflow application</li>
</ul>
</section>
<section id="what-spatial-interaction-models-are" class="slide level2">
<h2>What Spatial Interaction Models are?</h2>
<div class="columns">
<div class="column" style="width:65%;">
<p>Spatial interaction or ‚Äúgravity models‚Äù estimate the flow of people, material, or information between locations in geographical space.</p>
<p><img data-src="img/image10-1.jpg"></p>
</div><div class="column" style="width:35%;">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Spatial interaction models seek to explain existing spatial flows. As such it is possible to measure flows and predict the consequences of changes in the conditions generating them. When such attributes are known, it is possible to better allocate transport resources such as conveyances, infrastructure, and terminals.</p>
</div>
</div>
</div>
</div></div>
</section>
<section class="slide level2">

<h3 id="conditions-for-spatial-flows">Conditions for Spatial Flows</h3>
<ul>
<li>Three interdependent conditions are necessary for a spatial interaction to occur:</li>
</ul>

<img data-src="img/image10-2.jpg" class="r-stretch"><aside class="notes">
<ul>
<li><strong>Complementarity</strong>. There must be a supply and a demand between the interacting locations. A residential zone is complementary to an employment zone because the first is supplying workers while the second is supplying jobs. The same can be said concerning the complementarity between a store and its customers and between an industry and its suppliers (movements of freight). An economic system is based on a large array of complementary activities.</li>
<li><strong>Intervening opportunity (lack of)</strong>. Refers to a location that may offer a better alternative as a point of origin or as a point of destination. For instance, in order to have an interaction of a customer to a store, there must not be a closer store that offers a similar array of goods. Otherwise, the customer will likely patronize the closer store and the initial interaction will not take place.</li>
<li><strong>Transferability</strong>. Mobility must be supported by transport infrastructures, implying that the origin and the destination must be linked. Costs to overcome distance must not be higher than the benefits of the related interaction, even if there are complementarity and no alternative opportunity.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<h3 id="representation-of-a-movement-as-a-spatial-interaction">Representation of a Movement as a Spatial Interaction</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>Representing mobility as a spatial interaction involves several considerations:</p>
<ul>
<li>Locations: A movement is occurring between a location of origin and a location of destination. i generally denotes an origin while j is a destination.</li>
<li>Centroid: An abstraction of the attributes of a zone at a point.</li>
<li>Flows: Flows are generally expressed by a valued vector Tij representing an interaction between locations i and j.</li>
<li>Vectors: A vector Tij links two centroids and has a value assigned to it (50) which can represents movements.</li>
</ul>
</div><div class="column" style="width:50%;">
<p><img data-src="img/image10-3.jpg"></p>
</div></div>
<aside class="notes">
<ul>
<li>Locations. A movement is occurring between a location of origin and a location of destination. i generally denotes an origin while j is a destination. The representation of origins and destinations commonly involves centroids.</li>
<li>Centroid. An abstraction of the attributes of a zone at a point. This is of particular relevance when the attributes generating mobility are zonal (e.g.&nbsp;ZIP codes, cities, states, etc.) while the graphic representation requires specific origins and destinations. For instance, showing flows between ZIP codes would implicitly require the generation of one centroid for each ZIP code.</li>
<li>Flows. Flows are generally expressed by a valued vector Tij representing an interaction between locations i and j.</li>
<li>Vectors. On the above figure, two areas, zone i and zone j, are represented as two centroids, i and j. A vector Tij links two centroids and has a value assigned to it (50) which can represents movements such as tons of freight, numbers of passengers per day, or number of phone calls.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="constructing-an-od-matrix" class="slide level2">
<h2>Constructing an O/D Matrix</h2>
<ul>
<li>The construction of an origin / destination matrix requires directional flow information between a series of locations.</li>
<li>Figure below represents movements (O/D pairs) between five locations (A, B, C, D and E). From this graph, an O/D matrix can be built where each O/D pair becomes a cell. A value of 0 is assigned for each O/D pair that does not have an observed flow.</li>
</ul>

<img data-src="img/image10-4.jpg" class="r-stretch"></section>
<section id="three-basic-types-of-interaction-models" class="slide level2">
<h2>Three Basic Types of Interaction Models</h2>
<ul>
<li>The general formulation of the spatial interaction model is stated as <strong>Tij</strong>, which is the interaction between location i (origin) and location j (destination). <strong>Vi</strong> are the attributes of the location of origin i, <strong>Wj</strong> are the attributes of the location of destination j, and <strong>Sij</strong> are the attributes of separation between the location of origin i and the location of destination j.</li>
<li>From this general formulation, three basic types of interaction models can be derived:</li>
</ul>

<img data-src="img/image10-5.jpg" class="r-stretch"></section>
<section id="gravity-models" class="slide level2">
<h2>Gravity Models</h2>
<div style="font-size: 0.85em">
<div class="columns">
<div class="column" style="width:50%;">
<p>The general formula (also known as unconstrained):</p>
<p><img data-src="img/image10-6a.jpg"></p>
<ul>
<li>Tij is the transition/trip or flow, ùëá, between origin ùëñ (always the rows in a matrix) and destination ùëó (always the columns in a matrix). If you are not overly familiar with matrix notation, the ùëñ and ùëó are just generic indexes to allow us to refer to any cell in the matrix.</li>
<li>ùëâ is a vector (a 1 dimensional matrix ‚Äì or, if you like, a single line of numbers) of origin attributes which relate to the emissivity of all origins in the dataset, ùëñ ‚Äì this could be any of the origin-related variables.</li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li>ùëä is a vector of destination attributes relating to the attractiveness of all destinations in the dataset, ùëó ‚Äì similarly, this could be any of the destination related variables.</li>
<li>ùëë is a matrix of costs (frequently distances ‚Äì hence, d) relating to the flows between ùëñ and ùëó.</li>
<li>ùëò, ùúá, ùõº and ùõΩ are all model parameters to be estimated. ùõΩ is assumed to be negative, as with an increase in cost/distance we would expect interaction to decrease.</li>
</ul>
</div></div>
</div>
</section>
<section class="slide level2">

<h3 id="unconstrained-totally-constrained-case">Unconstrained (Totally constrained) case</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>The O-D Matrix</p>
<p><img data-src="img/image10-6c.jpg"></p>
<p>and distance matrix:</p>
<p><img data-src="img/image10-6d.jpg" width="500"></p>
<p><img data-src="img/image10-6e.jpg"></p>
</div><div class="column" style="width:50%;">
<p>The estimated O-D matrix:</p>
<p><img data-src="img/image10-6f.jpg"></p>
<p>and the calculation T11</p>
<p><img data-src="img/image10-6g.jpg" width="400"></p>
</div></div>
</section>
<section class="slide level2">

<h3 id="the-origin-production-constrained-model">The Origin (Production) Constrained Model</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>In the Origin Constrained Model,</p>
<ul>
<li>ùëÇùëñ does not have a parameter as it is a known <strong>constraint</strong>.</li>
<li>ùê¥ùëñ is known as a <strong>balancing factor</strong> and is a vector of values which relate to each origin ùëñ which do the equivalent job as ùëò in the unconstrained/total constrained model but ensure that flow estimates from each origin sum to the know totals ùëÇùëñ rather than just the overall total.</li>
</ul>
</div><div class="column" style="width:50%;">
<p><img data-src="img/image10-6b.jpg"></p>
</div></div>
</section>
<section class="slide level2">

<h3 id="oringin-production-constrained-case">Oringin (Production) constrained case</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>The O-D Matrix</p>
<p><img data-src="img/image10-6c.jpg"></p>
<p>and distance matrix:</p>
<p><img data-src="img/image10-6d.jpg" width="500"></p>
<p><img data-src="img/image10-6e.jpg"></p>
</div><div class="column" style="width:50%;">
<p>The estimated O-D matrix:</p>
<p><img data-src="img/image10-7a.jpg"></p>
<p>A1 is calculated as shown below:</p>
<p><img data-src="img/image10-7b.jpg"></p>
<p>Hence, T11 is calculated as shown below:</p>
<p><img data-src="img/image10-7c.jpg" width="450"></p>
</div></div>
</section>
<section class="slide level2">

<h3 id="the-destination-attraction-constrained-model">The Destination (Attraction) Constrained Model</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/image10-8a.jpg"></p>
</div></div>
</section>
<section class="slide level2">

<h3 id="destination-attraction-constrained-case">Destination (Attraction) constrained case</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>The O-D Matrix</p>
<p><img data-src="img/image10-6c.jpg"></p>
<p>and distance matrix:</p>
<p><img data-src="img/image10-6d.jpg" width="500"></p>
<p><img data-src="img/image10-6e.jpg"></p>
</div><div class="column" style="width:50%;">
<p>The estimated O-D matrix:</p>
<p><img data-src="img/image10-8b.jpg"></p>
<p>B1 is calculated as shown below:</p>
<p><img data-src="img/image10-8c.jpg"></p>
<p>Hence, T11 is calculated as shown below:</p>
<p><img data-src="img/image10-8d.jpg" width="500"></p>
</div></div>
</section>
<section class="slide level2">

<h3 id="the-doubly-constrained-model">The Doubly Constrained Model</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/image10-9a.jpg"></p>
</div><div class="column" style="width:50%;">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Note that the calculation of ùê¥ùëñ relies on knowing ùêµùëó and the calculation of ùêµùëó relies on knowing ùê¥ùëñ ‚Äì something of a conundrum to which the solution is elegantly described by Senior (1979), who sketches out a very useful algorithm for iteratively arriving at values for ùê¥ùëñ and ùêµùëó by setting each to equal 1 initially and then continuing to calculate each in turn until the difference between successive iterations of the ùê¥ùëñ and ùêµùëó values is small enough not to matter.</p>
</div>
</div>
</div>
</div></div>
</section>
<section class="slide level2">

<h3 id="doubly-constrained-case">Doubly constrained case</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>The O-D Matrix</p>
<p><img data-src="img/image10-6c.jpg"></p>
<p>and distance matrix:</p>
<p><img data-src="img/image10-6d.jpg" width="500"></p>
<p><img data-src="img/image10-6e.jpg"></p>
</div><div class="column" style="width:50%;">
<p>The estimated O-D matrix:</p>
<p><img data-src="img/image10-9b.jpg"></p>
<p>Hence, T11 is calculated as shown below:</p>
<p><img data-src="img/image10-9c.jpg" width="500"></p>
<p>Notice that A1 and B1 are computed by using computer.</p>
</div></div>
</section>
<section id="spatial-econometric-interaction-models" class="slide level2">
<h2>Spatial Econometric Interaction Models</h2>
<h3 id="limitation-of-spatial-interaction-models">Limitation of Spatial Interaction Models</h3>
<ul>
<li>The gravity model assumes independence among observations, and this assumption seems heroic for many fundamentally spatial problems.</li>
</ul>

<img data-src="img/image5-1.jpg" class="r-stretch"></section>
<section class="slide level2">

<h3 id="limitation-of-spatial-interaction-models-1">Limitation of Spatial Interaction Models</h3>
<p>There are two technical limitations of SIM:</p>
<ul>
<li><p>Maximum-likelihood estimates require that the dependent variable vector follow a normal distribution or that it can be suitably transformed to achieve normality.</p></li>
<li><p>Maximum-likelihood method is not appropriate when there are a large number of zero flows exist.</p></li>
</ul>
</section>
<section id="spatial-econometric-model-for-origin-destination-flows" class="slide level2">
<h2>Spatial Econometric Model for Origin-Destination Flows</h2>

<img data-src="img/image5-6.jpg" class="r-stretch"></section>
<section id="spatial-econometric-interaction-model" class="slide level2">
<h2>Spatial Econometric Interaction Model</h2>
<p>The general formula of Spatial Econometric Interaction Model is defined as follow:</p>

<img data-src="img/image5-2.jpg" class="r-stretch"><p>where by ùêñ<sub>ùì≠</sub>, ùêñ<sub>ùíê</sub> and ùêñ<sub>ùìå</sub> are spatial weights of destination, origin and origin-destination.</p>
</section>
<section id="what-is-econometrics" class="slide level2">
<h2>What is Econometrics</h2>
<ul>
<li><p>Econometrics is an application of statistical methods to economic data in order to give empirical content to economic relationships. More precisely, it is ‚Äúthe quantitative analysis of actual economic phenomena based on the concurrent development of theory and observation, related by appropriate methods of inference.</p></li>
<li><p>A basic tool for econometrics is the multiple linear regression model.</p></li>
<li><p>Econometric theory uses statistical theory and mathematical statistics to evaluate and develop econometric methods.</p></li>
<li><p>Econometricians try to find estimators that have desirable statistical properties including unbiasedness, efficiency, and consistency.</p></li>
<li><p>Applied econometrics uses theoretical econometrics and real-world data for assessing economic theories, developing econometric models, analysing economic history, and forecasting.</p></li>
</ul>
</section>
<section id="what-is-spatial-econometrics" class="slide level2">
<h2>What is Spatial Econometrics?</h2>
<ul>
<li>A branch of economics that deals with the study of economic phenomena that exhibit spatial dependence.</li>
<li>This branch of economics has its roots in classical economics, which focused on the study of how economic activity was related to the location of factors of production.</li>
<li>Classical economists developed theories of how businesses locate themselves in relation to their markets and to each other. These theories formed the basis for the development of modern spatial economics.</li>
</ul>
</section>
<section id="what-is-spatial-econometrics-1" class="slide level2">
<h2>What is Spatial Econometrics?</h2>
<ul>
<li>In a broader sense it is inclusive of the models and theoretical instruments of spatial statistics and spatial data analysis to analyze various economic effects such as <strong>externalities</strong>, <strong>interactions</strong>, <strong>spatial concentration</strong> and many others.</li>
<li>Discrete spatial data can take the form of points, lines and polygons. <strong>Point</strong> data refer to the position of the single economic agent observed at an individual level. <strong>Lines</strong> in space take the form of interactions between two spatial locations such as flows of goods, individuals and information. Finally data observed within <strong>polygons</strong> can take the form of predefined irregular portions of space, usually administrative partitions such as countries, regions or counties within one country.</li>
</ul>
</section>
<section id="what-are-the-examples-of-applications-using-spatial-econometrics" class="slide level2">
<h2>What Are The Examples of Applications Using Spatial Econometrics ?</h2>
<p>There are many applications for spatial econometrics . Here are a few examples :</p>
<ul>
<li>Evaluating the impact of a new road or railway on property values.</li>
<li>Estimating the effect of environmental regulations on firm location decisions.</li>
<li>Analyzing the determinants of crime rates across neighborhoods</li>
<li>Studying the relationship between house prices and income levels in different regions.</li>
<li>Investigating the spread of infectious diseases through a population.</li>
<li>Modeling the relationship between land values and location-specific services.</li>
<li>Analyzing the relationship between proximity to facilities and job opportunities .</li>
</ul>
</section>
<section id="spatial-model-specification-for-origin-destination-flows" class="slide level2">
<h2>Spatial Model Specification for Origin-Destination Flows</h2>

<img data-src="img/image5-3.jpg" class="r-stretch"></section>
<section id="spatial-model-specification-for-origin-destination-flows-1" class="slide level2">
<h2>Spatial Model Specification for Origin-Destination Flows</h2>

<img data-src="img/image5-4.jpg" class="r-stretch"></section>
<section id="spatial-model-specification-for-origin-destination-flows-2" class="slide level2">
<h2>Spatial Model Specification for Origin-Destination Flows</h2>



<img data-src="img/image5-5.jpg" class="r-stretch"></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>